---
- hosts: localhost
  become: yes
  vars:
    ansible_connection: local
    user_name: theintegrative
  handlers:
    - name: Setup git repos
      include_tasks: git-repos.yml

  tasks:
  - name: Install the packages that you mainly use
    package:
      name:
       - keepassxc
       - neovim
       - remmina
       - sudo
       - tmux
       - nmap
       - neofetch
       - docker
       - docker-compose
       - virt-manager
       - ansible
       - python3-pip
       - htop
       - git
      state: latest

  - command: "true"
    notify: Setup git repos
  
  - name: Create a directories if it does not exist
    ansible.builtin.file:
      path: "{{ item }}"
      state: directory
      mode: "0775"
      recurse: true
      owner: "{{ user_name }}"
      group: "{{ user_name }}"
    loop:
      - /home/{{ user_name }}/Downloads/
      - /home/{{ user_name }}/github/

  - name: Configure services that run on your system
    ansible.builtin.service:
      name: "{{ item }}"
      enabled: true
      state: restarted
    loop:
      - docker
